function afisha(){$(".afisha-slider").length&&$(".afisha-slider").each(function(){let t=$(this);const e=new Swiper(".afisha-slider__swiper",{slidesPerView:"auto",speed:2e3,spaceBetween:194});let o=!1,n="",i=0;setInterval(function(){o&&(0==i&&(console.log(n),"LEFT"==n&&e.slidePrev(),"RIGHT"==n)&&e.slideNext(),2e3==(i+=100))&&(i=0)},100);$(this).hover(function(){o=!0},function(){o=!1});var a=$(this).find(".afisha-slider__cursor");$(this).mousemove(function(e){console.log(t.offset().top),gsap.to(a,.23,{left:e.pageX-t.offset().left,top:e.pageY-t.offset().top,ease:Power4.easOut}),n="",o&&e.clientX<window.innerWidth/3&&(o=!0,n="LEFT",i=0,console.log("autoplay left")),o&&e.clientX>window.innerWidth-window.innerWidth/3&&(i=0,o=!0,n="RIGHT",console.log("autoplay right"))})})}function bookCorp(){$("#bookcorp-form").validate({errorPlacement:function(e,t){},submitHandler:function(e){$("#bookcorp-form button[type='submit']").attr("disabled","disabled"),$.ajax({url:$(e).attr("action"),data:$(e).serialize(),method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},context:document.body,success:function(){barba.go($("#bookcorp-form").data("thanks"))},error:function(){barba.go($("#bookcorp-form").data("error"))}})}})}function bookTable(){$(".book").length&&$(".book").click(function(){barba.go($(".svg-map").data("href")+$(this).data("table"))}),$(".book-table__gallery").length&&($("#booktable-form").validate({errorPlacement:function(e,t){},submitHandler:function(e){$("#booktable-form button[type='submit']").attr("disabled","disabled"),$.ajax({url:$(e).attr("action"),data:$(e).serialize(),method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},context:document.body,success:function(){barba.go($("#booktable-form").data("thanks"))},error:function(){barba.go($("#booktable-form").data("error"))}})}}),$(".book-table__gallery").each(function(){let t=$(this),e=new Swiper(t.find(".book-table__swiper")[0],{centeredSlides:!0,loop:!0,loopedSlides:7,observerParent:!0,observerUpdate:!0,observer:!0,slidesPerView:1,speed:2e3,spaceBetween:0});let o=!1,n="",i=0;setInterval(function(){console.log(),o&&(0==i&&(console.log(n,t,e),"LEFT"==n&&e.slidePrev(),"RIGHT"==n)&&e.slideNext(),2e3==(i+=100))&&(i=0)},100);$(this).hover(function(){o=!0},function(){o=!1});let a=$(this).find(".book-table__cursor");$(this).mousemove(function(e){console.log(e),gsap.to(a,.23,{left:e.pageX-t.offset().left,top:e.pageY-t.offset().top,ease:Power4.easOut}),n="",o&&e.clientX<$(this).innerWidth()/2&&(o=!0,n="LEFT",i=0,console.log("autoplay left")),o&&e.clientX>$(this).innerWidth()/2&&(i=0,o=!0,n="RIGHT",console.log("autoplay right"))})}))}function clubCard(){$("#card-form").validate({errorPlacement:function(e,t){},submitHandler:function(e){$("#card-form button[type='submit']").attr("disabled","disabled"),$.ajax({url:$(e).attr("action"),data:$(e).serialize(),method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},context:document.body,success:function(){barba.go($("#card-form").data("thanks"))},error:function(){barba.go($("#card-form").data("error"))}})}})}function front(){var e=!1;$(".front__player-play").click(function(){e?($(".front__player-play").removeClass("_play"),$(".front__player-audio")[0].pause(),e=!1):(e=!0,$(".front__player-play").addClass("_play"),$(".front__player-audio")[0].play())});let n=$(".front-card").length;var t=$(".front-card").length,o=t-1;let i=20,a=25,r=(window.innerWidth<900&&(i=10,a=10),.3),l=(window.innerWidth<900&&(r=.2),!1),s=[];for(let e=1;e<=n;e++)s.push(e);console.log(s),$(".front__swiper").on("mousewheel",function(e){$("#front-top").attr("state");if(0<e.originalEvent.wheelDelta/120){if(!l){l=!0,setTimeout(function(){l=!1},1e3),console.log("frontDown");var t=[];t.push(s[n-1]);for(let e=0;e<n-1;e++)t.push(s[e]);s=t,console.log(s),s.forEach((e,t)=>{var o=n-1-t;gsap.to("#front-card-"+e,{top:a*o*-1,zIndex:100*(t+1),width:$(".front__swiper").width()-2*i*o,marginLeft:i*o,duration:r})}),gsap.to("#front-card-"+s[0],{top:window.innerHeight-300,zIndex:1e3,width:1.1*$(".front__swiper").width(),marginLeft:0,duration:r,onComplete:function(){gsap.to("#front-card-"+s[0],{top:-1*a*(n-1),zIndex:80,width:$(".front__swiper").width()-2*i*(n-1),marginLeft:i*(n-1),duration:r/2})}})}}else if(!l){l=!0,setTimeout(function(){l=!1},1e3),console.log("frontUp");var o=[];for(let e=1;e<n;e++)o.push(s[e]);o.push(s[0]),s=o,console.log(s),s.forEach((e,t)=>{var o=n-1-t;gsap.to("#front-card-"+e,{top:a*o*-1,zIndex:100*(t+1),width:$(".front__swiper").width()-2*i*o,marginLeft:i*o,duration:r})}),gsap.to("#front-card-"+s[n-1],{top:900<window.innerWidth?-250:-150,zIndex:0,width:900<window.innerWidth?$(".front__swiper").width()-200:$(".front__swiper").width(),marginLeft:900<window.innerWidth?200:0,duration:r,onComplete:function(){gsap.to("#front-card-"+s[n-1],{top:0,zIndex:1e3,width:$(".front__swiper").width(),marginLeft:0,duration:r/2})}})}$(".front__number").text($("#front-card-"+s[n-1]).data("number"))}),console.log(t,o)}function gallery(){$(".gallery-slider").length&&($(".calendar-block .arrow-link").click(function(){$(".calendar-block").toggleClass("_open")}),$(".air-calendar-select").each(function(){new AirDatepicker(this,{inline:!0,onSelect({formattedDate:e}){console.log($(".calendar-block").data("href")+e),barba.go($(".calendar-block").data("href")+e)}})}),$(document).on("click",".gallery-slider__swiper .swiper-slide",function(){console.log("click"),$(".popup-gallery").fadeIn();var e=$(this).attr("slide");$(".popup-gallery__swiper")[0].swiper.slideTo(e)}),$(".gallery-slider").each(function(){let t=$(this),e=0,o=(t.find(".swiper-slide").each(function(){$(this).attr("slide",e),e++}),$(".popup-gallery__swiper .swiper-wrapper").html(t.find(".swiper-wrapper").html()),new Swiper(t.find(".gallery-slider__swiper")[0],{observerParent:!0,observerUpdate:!0,observer:!0,loop:!0,slidesPerView:"auto",speed:2e3,preventClicks:!1,preventClicksPropagation:!1,preventInteractionOnTransition:!1,spaceBetween:20,breakpoints:{600:{spaceBetween:50},1300:{spaceBetween:97}}}));let n=!1,i="",a=0;setInterval(function(){n&&(0==a&&("LEFT"==i&&(o.slidePrev(),console.log("left !!!!")),"RIGHT"==i)&&o.slideNext(),2e3==(a+=100))&&(a=0)},100);$(this).hover(function(){n=!0},function(){n=!1});let r=$(this).find(".gallery-slider__cursor");$(this).mousemove(function(e){gsap.to(r,.23,{left:e.pageX,top:e.pageY-t.offset().top,ease:Power4.easOut}),i="",n&&e.clientX<window.innerWidth/3&&(n=!0,i="LEFT",console.log("autoplay left")),n&&e.clientX>window.innerWidth-window.innerWidth/3&&(n=!0,i="RIGHT",console.log("autoplay right"))})}))}function header(){$(".header__open-menu").click(function(){$(".header").toggleClass("_open-menu")}),$(".header-menu__item a").click(function(){$(".header").removeClass("_open-menu")})}function popup(){$(".popup-gallery__close").click(function(){$(".popup-gallery").fadeOut()}),$(".popup-gallery__slider").each(function(){let t=$(this),e=new Swiper(t.find(".popup-gallery__swiper")[0],{observerParent:!0,observerUpdate:!0,observer:!0,loop:!0,slidesPerView:1,loopedSlides:7,speed:2e3,spaceBetween:20,breakpoints:{600:{spaceBetween:50},1300:{spaceBetween:97}}});let o=!1,n="",i=0;setInterval(function(){o&&(0==i&&("LEFT"==n&&(e.slidePrev(),console.log("left !!!!")),"RIGHT"==n)&&e.slideNext(),2e3==(i+=100))&&(i=0)},100);$(this).hover(function(){o=!0},function(){o=!1});let a=$(this).find(".popup-gallery__cursor");$(this).mousemove(function(e){gsap.to(a,.23,{left:e.pageX,top:e.pageY-t.offset().top,ease:Power4.easOut}),n="",o&&e.clientX<window.innerWidth/3&&(o=!0,n="LEFT",console.log("autoplay left")),o&&e.clientX>window.innerWidth-window.innerWidth/3&&(o=!0,n="RIGHT",console.log("autoplay right"))})})}function components(){function e(){$(".block__tab").each(function(){$(this).hasClass("_active")?$($(this).data("tab")).removeClass("_d-none"):$($(this).data("tab")).addClass("_d-none")})}$(".block__head").append('<span class="block__head-line"></span>'),$(".block h2,.block .h2:not(a)").each(function(){var n=$(this),e=($(this).after('<div class="block__h2-lines h2">'),$(this).wrap('<div class="block__h2-default">'),$(this).html().replace(/[\wа-яё,.!:;(&)]+/gim,function(e){return"br"===e||"i"===e?e:"<span>"+e+"</span>"}));$(this).html(e),$(this).find("i span").each(function(){$(this).html("<i>"+$(this).text()+"</i>")});let t=1,o=0;$(this).find("span,br").each(function(){$(this).position().top>=o+30&&(t++,o=$(this).position().top),$(this).attr("line",t)});var i=$(this).closest(".block__h2-default").next(".block__h2-lines");for(let o=1;o<30;o++){let e=$("<div>",{class:"block__h2-line-"+o}),t=0;n.find("span[line='"+o+"']").each(function(){e.append($(this).clone()),e.append(" "),t=1}),t&&(i.append(e),e.wrap('<div class="block__h2-line-wrap">'))}}),window.addEventListener("resize",function(e){$(".block h2,.block .h2:not(a)").each(function(){var n=$(this);let e=1,t=0;$(this).find("span,br").each(function(){$(this).position().top>=t+30&&(e++,t=$(this).position().top),$(this).attr("line",e)});var i=$(this).closest(".block__h2-default").next(".block__h2-lines");i.html("");for(let o=1;o<30;o++){let e=$("<div>",{class:"block__h2-line-"+o}),t=0;console.log(n.html()),n.find("span[line='"+o+"']").each(function(){e.append($(this).clone()),e.append(" "),t=1}),t&&(i.append(e),e.wrap('<div class="block__h2-line-wrap">'))}})},!0),$(".photo-slider").length&&$(".photo-slider").each(function(){let t=$(this),e=new Swiper(t.find(".photo-slider__swiper")[0],{centeredSlides:!0,loop:!0,loopedSlides:7,observerParent:!0,observerUpdate:!0,observer:!0,slidesPerView:"auto",speed:2e3,spaceBetween:20,breakpoints:{600:{spaceBetween:100},1300:{spaceBetween:215}}});let o=!1,n="",i=0;setInterval(function(){console.log(),o&&(0==i&&("LEFT"==n&&e.slidePrev(),"RIGHT"==n)&&e.slideNext(),2e3==(i+=100))&&(i=0)},100);$(this).hover(function(){o=!0},function(){o=!1});let a=$(this).find(".photo-slider__cursor");$(this).mousemove(function(e){gsap.to(a,.23,{left:e.pageX,top:e.pageY-t.offset().top,ease:Power4.easOut}),n="",o&&e.clientX<window.innerWidth/3&&(o=!0,n="LEFT",i=0,console.log("autoplay left")),o&&e.clientX>window.innerWidth-window.innerWidth/3&&(i=0,o=!0,n="RIGHT",console.log("autoplay right"))})}),$(".block__tabs .block__tab").click(function(){$(this).closest(".block__tabs").find(".block__tab").removeClass("_active"),$(this).addClass("_active"),e()}),e(),$(".air").each(function(){new AirDatepicker(this,{})}),$(".select2-wrap").each(function(){$(this).find(".select2").select2({minimumResultsForSearch:-1,dropdownParent:$(this),placeholder:$(this).find(".select2").attr("placeholder")})}),$("._mask-phone").each(function(){$(this).inputmask("+7 999-999-99-99",{skipOptionalPartCharacter:" "})}),$("._mask-count").length&&new Cleave("._mask-count",{numeral:!0,delimiter:" ",numeralThousandsGroupStyle:"thousand"}),$("._mask-price").length&&new Cleave("._mask-price",{numeral:!0,delimiter:" ",prefix:" руб",tailPrefix:!0,noImmediatePrefix:!0,numeralThousandsGroupStyle:"thousand"}),$("._mask-date").length&&new Cleave("._mask-date",{date:!0,delimiter:".",datePattern:["d","m","Y"]})}$(function(){}),$(function(){}),$(function(){}),$(function(){}),$(function(){front()}),$(function(){}),$(function(){}),$(function(){}),$(function(){}),$(function(){header()}),$(function(){components();let e=new LocomotiveScroll({el:document.querySelector("[data-scroll-container]"),smooth:!0});e.on("scroll",e=>{if("object"==typeof e.currentElements){var t;for(key in e.currentElements)console.log($(e.currentElements[key].el).hasClass("two-photo")),$(e.currentElements[key].el).hasClass("two-photo")&&((t=$(e.currentElements[key].el)).find(".two-photo__big:first-child").css("padding-right",174*e.currentElements[key].progress),t.find(".two-photo__small:last-child").css("padding-left",174*(1-e.currentElements[key].progress)),t.find(".two-photo__big:last-child").css("padding-left",174*e.currentElements[key].progress),t.find(".two-photo__small:first-child").css("padding-right",174*(1-e.currentElements[key].progress)))}}),bookTable(),afisha(),gallery(),bookCorp(),clubCard(),barba.hooks.after(()=>{components(),bookTable(),afisha(),gallery(),clubCard(),bookCorp(),e.scrollTo("top",100),setTimeout(function(){e.update()},1500)}),barba.init()}),$(function(){popup()});