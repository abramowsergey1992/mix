function bookCorp(){$("#bookcorp-form").validate({errorPlacement:function(e,t){},submitHandler:function(e){$("#bookcorp-form button[type='submit']").attr("disabled","disabled"),$.ajax({url:$(e).attr("action"),data:$(e).serialize(),method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},context:document.body,success:function(){barba.go($("#bookcorp-form").data("thanks"))},error:function(){barba.go($("#bookcorp-form").data("error"))}})}})}function afisha(){$(".afisha-slider").length&&$(".afisha-slider").each(function(){let t=$(this);const e=new Swiper(".afisha-slider__swiper",{slidesPerView:"auto",speed:2e3,spaceBetween:194,preventClicks:!1});let n=!1,o="",a=0;setInterval(function(){n&&(0==a&&(console.log(o),"LEFT"==o&&e.slidePrev(),"RIGHT"==o)&&e.slideNext(),2e3==(a+=100))&&(a=0)},100);$(this).hover(function(){n=!0},function(){n=!1});var i=$(this).find(".afisha-slider__cursor");$(this).mousemove(function(e){console.log(t.offset().top),gsap.to(i,.23,{left:e.pageX-t.offset().left,top:e.pageY-t.offset().top,ease:Power4.easOut}),o="",n&&e.clientX<window.innerWidth/3&&(n=!0,o="LEFT",a=0,console.log("autoplay left")),n&&e.clientX>window.innerWidth-window.innerWidth/3&&(a=0,n=!0,o="RIGHT",console.log("autoplay right"))})})}function bookTable(){$(".book").length&&$(".book").click(function(){barba.go($(".svg-map").data("href")+$(this).data("table"))}),$(".book-table__gallery").length&&($("#booktable-form").validate({errorPlacement:function(e,t){},submitHandler:function(e){$("#booktable-form button[type='submit']").attr("disabled","disabled"),$.ajax({url:$(e).attr("action"),data:$(e).serialize(),method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},context:document.body,success:function(){barba.go($("#booktable-form").data("thanks"))},error:function(){barba.go($("#booktable-form").data("error"))}})}}),$(".book-table__gallery").each(function(){let t=$(this),e=new Swiper(t.find(".book-table__swiper")[0],{centeredSlides:!0,loop:!0,loopedSlides:7,observerParent:!0,observerUpdate:!0,observer:!0,slidesPerView:1,speed:2e3,spaceBetween:0});let n=!1,o="",a=0;setInterval(function(){console.log(),n&&(0==a&&(console.log(o,t,e),"LEFT"==o&&e.slidePrev(),"RIGHT"==o)&&e.slideNext(),2e3==(a+=100))&&(a=0)},100);$(this).hover(function(){n=!0},function(){n=!1});let i=$(this).find(".book-table__cursor");$(this).mousemove(function(e){console.log(e),gsap.to(i,.23,{left:e.pageX-t.offset().left,top:e.pageY-t.offset().top,ease:Power4.easOut}),o="",n&&e.clientX<$(this).innerWidth()/2&&(n=!0,o="LEFT",a=0,console.log("autoplay left")),n&&e.clientX>$(this).innerWidth()/2&&(a=0,n=!0,o="RIGHT",console.log("autoplay right"))})}))}function clubCard(){$("#card-form").validate({errorPlacement:function(e,t){},submitHandler:function(e){$("#card-form button[type='submit']").attr("disabled","disabled"),$.ajax({url:$(e).attr("action"),data:$(e).serialize(),method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},context:document.body,success:function(){barba.go($("#card-form").data("thanks"))},error:function(){barba.go($("#card-form").data("error"))}})}})}function front(){var e=!1;$(".front__player-play").click(function(){e?($(".front__player-play").removeClass("_play"),$(".front__player-audio")[0].pause(),e=!1):(e=!0,$(".front__player-play").addClass("_play"),$(".front__player-audio")[0].play())});let o=$(".front-card").length;var t=$(".front-card").length,n=t-1;let a=20,i=25,r=(window.innerWidth<900&&(a=10,i=10),.1),s=(window.innerWidth<900&&(r=.2),!1),l=[];for(let e=1;e<=o;e++)l.push(e);function c(){s=!0,setTimeout(function(){s=!1},1e3),console.log("frontDown");var t=[];t.push(l[o-1]);for(let e=0;e<o-1;e++)t.push(l[e]);l=t,console.log(l),l.forEach((e,t)=>{var n;0==t?(console.log("#front-card-"+l[0]),gsap.to("#front-card-"+l[0],{top:window.innerWidth<992?window.innerHeight:window.innerHeight-300,zIndex:1e3,width:$(".front__swiper").width(),marginLeft:0,duration:r})):(n=o-1-t,gsap.to("#front-card-"+e,{top:i*n*-1,zIndex:100*(t+1),width:$(".front__swiper").width()-2*a*n,marginLeft:a*n,duration:r}))})}console.log(l),l.forEach((e,t)=>{var n=o-1-t;t==o-1?gsap.to("#front-card-"+l[o-1],{top:0,zIndex:1e3,width:$(".front__swiper").width(),marginLeft:0,duration:r}):0==t?(console.log("#front-card-"+l[0]),gsap.to("#front-card-"+l[0],{top:window.innerHeight-300,zIndex:0,width:$(".front__swiper").width(),marginLeft:0,duration:r})):gsap.to("#front-card-"+e,{top:i*n*-1,zIndex:100*(t+1),width:$(".front__swiper").width()-2*a*n,marginLeft:a*n,duration:r})}),$(".front__swiper").on("mousewheel",function(e){$("#front-top").attr("state");if(0<e.originalEvent.wheelDelta/120)s||c();else if(!s){s=!0,setTimeout(function(){s=!1},1e3),console.log("frontUp");var t=[];for(let e=1;e<o;e++)t.push(l[e]);t.push(l[0]),l=t,console.log(l),l.forEach((e,t)=>{var n=o-1-t;t==o-1?gsap.to("#front-card-"+l[o-1],{top:0,zIndex:1e3,width:$(".front__swiper").width(),marginLeft:0,duration:r}):0==t?(console.log("#front-card-"+l[0]),gsap.to("#front-card-"+l[0],{top:window.innerHeight-300,zIndex:0,width:$(".front__swiper").width(),marginLeft:0,duration:r})):gsap.to("#front-card-"+e,{top:i*n*-1,zIndex:100*(t+1),width:$(".front__swiper").width()-2*a*n,marginLeft:a*n,duration:r})})}$(".front__number").text($("#front-card-"+l[o-1]).data("number"))}),$(".front__swiper").swipe({preventDefaultEvents:!1,swipe:function(e,t,n,o,a,i){console.log(t),50<=n&&"down"==t&&c()}}),console.log(t,n)}function gallery(){$(".gallery-slider").length&&($(".calendar-block .arrow-link").click(function(){$(".calendar-block").toggleClass("_open")}),$(".air-calendar-select").each(function(){new AirDatepicker(this,{inline:!0,onSelect({formattedDate:e}){console.log($(".calendar-block").data("href")+e),barba.go($(".calendar-block").data("href")+e)}})}),$(document).on("click",".gallery-slider__swiper .swiper-slide",function(){console.log("click"),$(".popup-gallery").fadeIn();var e=$(this).attr("slide");$(".popup-gallery__swiper")[0].swiper.slideTo(e)}),$(".gallery-slider").each(function(){let t=$(this),e=0,n=(t.find(".swiper-slide").each(function(){$(this).attr("slide",e),e++}),$(".popup-gallery__swiper .swiper-wrapper").html(t.find(".swiper-wrapper").html()),new Swiper(t.find(".gallery-slider__swiper")[0],{observerParent:!0,observerUpdate:!0,observer:!0,loop:!0,preventClicks:!1,slidesPerView:"auto",speed:2e3,preventClicksPropagation:!1,preventInteractionOnTransition:!1,spaceBetween:20,breakpoints:{600:{spaceBetween:50},1300:{spaceBetween:97}}}));let o=!1,a="",i=0;setInterval(function(){o&&(0==i&&("LEFT"==a&&(n.slidePrev(),console.log("left !!!!")),"RIGHT"==a)&&n.slideNext(),2e3==(i+=100))&&(i=0)},100);$(this).hover(function(){o=!0},function(){o=!1});let r=$(this).find(".gallery-slider__cursor");$(this).mousemove(function(e){gsap.to(r,.23,{left:e.pageX,top:e.pageY-t.offset().top,ease:Power4.easOut}),a="",o&&e.clientX<window.innerWidth/3&&(o=!0,a="LEFT",console.log("autoplay left")),o&&e.clientX>window.innerWidth-window.innerWidth/3&&(o=!0,a="RIGHT",console.log("autoplay right"))})}))}function header(){$(".header__open-menu").click(function(){$(".header").toggleClass("_open-menu")}),$(".header-menu__item a").click(function(){$(".header").removeClass("_open-menu")}),$(".header__contact").click(function(){$(".header").removeClass("_open-menu")})}function popup(){$(".popup-gallery__close").click(function(){$(".popup-gallery").fadeOut()}),$(".popup-gallery__slider").each(function(){let t=$(this),e=new Swiper(t.find(".popup-gallery__swiper")[0],{observerParent:!0,observerUpdate:!0,observer:!0,loop:!0,slidesPerView:1,loopedSlides:7,speed:2e3,spaceBetween:20,breakpoints:{600:{spaceBetween:50},1300:{spaceBetween:97}}});let n=!1,o="",a=0;setInterval(function(){n&&(0==a&&("LEFT"==o&&(e.slidePrev(),console.log("left !!!!")),"RIGHT"==o)&&e.slideNext(),2e3==(a+=100))&&(a=0)},100);$(this).hover(function(){n=!0},function(){n=!1});let i=$(this).find(".popup-gallery__cursor");$(this).mousemove(function(e){gsap.to(i,.23,{left:e.pageX,top:e.pageY-t.offset().top,ease:Power4.easOut}),o="",n&&e.clientX<window.innerWidth/3&&(n=!0,o="LEFT",console.log("autoplay left")),n&&e.clientX>window.innerWidth-window.innerWidth/3&&(n=!0,o="RIGHT",console.log("autoplay right"))})})}function components(){function e(){$(".block__tab").each(function(){$(this).hasClass("_active")?$($(this).data("tab")).removeClass("_d-none"):$($(this).data("tab")).addClass("_d-none")})}$(".block__head").append('<span class="block__head-line"></span>'),$(".block h2,.block .h2:not(a)").each(function(){var o=$(this),e=($(this).after('<div class="block__h2-lines h2">'),$(this).wrap('<div class="block__h2-default">'),$(this).html().replace(/[\wа-яё,.!:;(&)]+/gim,function(e){return"br"===e||"i"===e?e:"<span>"+e+"</span>"}));$(this).html(e),$(this).find("i span").each(function(){$(this).html("<i>"+$(this).text()+"</i>")});let t=1,n=0;$(this).find("span,br").each(function(){$(this).position().top>=n+30&&(t++,n=$(this).position().top),$(this).attr("line",t)});var a=$(this).closest(".block__h2-default").next(".block__h2-lines");for(let n=1;n<30;n++){let e=$("<div>",{class:"block__h2-line-"+n}),t=0;o.find("span[line='"+n+"']").each(function(){e.append($(this).clone()),e.append(" "),t=1}),t&&(a.append(e),e.wrap('<div class="block__h2-line-wrap">'))}}),window.addEventListener("resize",function(e){$(".block h2,.block .h2:not(a)").each(function(){var o=$(this);let e=1,t=0;$(this).find("span,br").each(function(){$(this).position().top>=t+30&&(e++,t=$(this).position().top),$(this).attr("line",e)});var a=$(this).closest(".block__h2-default").next(".block__h2-lines");a.html("");for(let n=1;n<30;n++){let e=$("<div>",{class:"block__h2-line-"+n}),t=0;console.log(o.html()),o.find("span[line='"+n+"']").each(function(){e.append($(this).clone()),e.append(" "),t=1}),t&&(a.append(e),e.wrap('<div class="block__h2-line-wrap">'))}})},!0),$(".photo-slider").length&&$(".photo-slider").each(function(){let t=$(this),e=new Swiper(t.find(".photo-slider__swiper")[0],{centeredSlides:!0,loop:!0,loopedSlides:7,observerParent:!0,observerUpdate:!0,observer:!0,slidesPerView:"auto",speed:2e3,preventClicks:!1,spaceBetween:20,breakpoints:{600:{spaceBetween:100},1300:{spaceBetween:215}}});let n=!1,o="",a=0;setInterval(function(){console.log(),n&&(0==a&&("LEFT"==o&&e.slidePrev(),"RIGHT"==o)&&e.slideNext(),2e3==(a+=100))&&(a=0)},100);$(this).hover(function(){n=!0},function(){n=!1});let i=$(this).find(".photo-slider__cursor");$(this).mousemove(function(e){gsap.to(i,.23,{left:e.pageX,top:e.pageY-t.offset().top,ease:Power4.easOut}),o="",n&&e.clientX<window.innerWidth/3&&(n=!0,o="LEFT",a=0,console.log("autoplay left")),n&&e.clientX>window.innerWidth-window.innerWidth/3&&(a=0,n=!0,o="RIGHT",console.log("autoplay right"))})}),$(".block__tabs .block__tab").click(function(){$(this).closest(".block__tabs").find(".block__tab").removeClass("_active"),$(this).addClass("_active"),e()}),e(),$(".air").each(function(){new AirDatepicker(this,{})}),$(".select2-wrap").each(function(){$(this).find(".select2").select2({minimumResultsForSearch:-1,dropdownParent:$(this),placeholder:$(this).find(".select2").attr("placeholder")})}),$("._mask-phone").each(function(){$(this).inputmask("+7 999-999-99-99",{skipOptionalPartCharacter:" "})}),$("._mask-count").length&&new Cleave("._mask-count",{numeral:!0,delimiter:" ",numeralThousandsGroupStyle:"thousand"}),$("._mask-price").length&&new Cleave("._mask-price",{numeral:!0,delimiter:" ",prefix:" руб",tailPrefix:!0,noImmediatePrefix:!0,numeralThousandsGroupStyle:"thousand"}),$("._mask-date").length&&new Cleave("._mask-date",{date:!0,delimiter:".",datePattern:["d","m","Y"]})}$(function(){}),$(function(){}),$(function(){}),$(function(){}),$(function(){}),$(function(){}),$(function(){}),$(function(){header()}),$(function(){function e(){AOS.init({startEvent:"DOMContentLoaded",initClassName:"aos-init",animatedClassName:"is-inview",useClassNames:!1,disableMutationObserver:!1,debounceDelay:50,throttleDelay:99,offset:120,delay:0,duration:1e3,easing:"ease",once:!1,mirror:!1,anchorPlacement:"top-bottom"})}components(),e(),bookTable(),afisha(),gallery(),bookCorp(),front(),clubCard(),barba.hooks.after(()=>{e()}),barba.hooks.before(()=>{setTimeout(function(){components(),bookTable(),afisha(),gallery(),clubCard(),bookCorp(),front()},100)}),barba.init({transitions:[{sync:!0,name:"card",from:{namespace:["front"]},to:{namespace:["chapter"]},beforeLeave(){gsap.to(".front-card",{top:0,zIndex:0,width:$(".front__swiper").width(),marginLeft:0,duration:.2})},afterLeave(){$("html").removeClass("_cards-aniimte  "),$(".cards-current").removeClass("cards-current"),$(".cards-next").removeClass("cards-next")},leave(e){return $("html,body").scrollTop(0),$("html").addClass("_cards-aniimte"),$(e.current.container).addClass("cards-current"),gsap.to(e.current.container,{opacity:0,duration:.5})},enter(e){return $(e.next.container).addClass("cards-next"),setTimeout(function(){$(e.next.container).addClass("cards-next-anim")},50),gsap.to(e.next.container,{duration:200,y:0,top:window.innerWidth<=1024?102:172})}},{sync:!0,name:"chapter",from:{namespace:["chapter"]},to:{namespace:["chapter"]},afterLeave(){$("html").removeClass("_chapter-aniimte  "),$(".chapter-current").removeClass("chapter-current"),$(".chapter-next").removeClass("chapter-next")},leave(e){return $("html,body").scrollTop(0),$("html").addClass("_chapter-aniimte"),$(e.current.container).addClass("chapter-current"),gsap.to(e.current.container,{y:-1*window.innerHeight+400+(window.innerWidth<=1024?102:172)+(window.innerWidth<=1024?40:61),duration:1})},enter(e){return $(e.next.container).addClass("chapter-next"),gsap.to(e.next.container,{duration:1,y:0})}}]})}),$(function(){popup()});